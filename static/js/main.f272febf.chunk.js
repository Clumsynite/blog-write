(this["webpackJsonpblog-write"]=this["webpackJsonpblog-write"]||[]).push([[0],{245:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),s=n(44),o=n.n(s),i=n(5),l=n.n(i),u=n(8),d=n(6),b=n(10),j=n(14),m=n(69),h=n.n(m),p={position:"absolute",height:"100vh",width:"100%",zIndex:"-1"},x=function(){return Object(r.jsx)("div",{style:p,children:Object(r.jsx)(h.a,{style:{position:"absolute"},id:"tsparticles",options:{fpsLimit:60,interactivity:{detectsOn:"canvas",modes:{bubble:{distance:400,duration:2,opacity:.8,size:40},push:{quantity:4},repulse:{distance:200,duration:.4}}},particles:{color:{value:"#000000"},links:{color:"#000000",distance:150,enable:!0,opacity:.5,width:1},collisions:{enable:!0},move:{direction:"none",enable:!0,outMode:"bounce",random:!1,speed:6,straight:!1},number:{density:{enable:!0,value_area:800},value:80},opacity:{value:.5},shape:{type:"circle"},size:{random:!0,value:5}}}})})},f=n(11),O="https://clumsy-blog.herokuapp.com",v=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(O);case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/user/signup"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/auth/logout"),{method:"POST",credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/user/me"),{headers:{authorization:"Bearer ".concat(t)},credentials:"include"});case 3:return n=e.sent,e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/blog/").concat(t,"/view"),{headers:{authorization:"Bearer ".concat(n)},credentials:"include"});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/blog/new"),{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(n)},credentials:"include",body:JSON.stringify(t)});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/blog/").concat(t,"/update"),{method:"PUT",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(r)},credentials:"include",body:JSON.stringify(n)});case 3:return c=e.sent,e.next=6,c.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/blog/").concat(t,"/delete"),{method:"DELETE",headers:{authorization:"Bearer ".concat(n)},credentials:"include"});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/comment/").concat(t,"/view"),{headers:{authorization:"Bearer ".concat(n)},credentials:"include"});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(l.a.mark((function e(t,n,r){var c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/comment/").concat(t,"/update"),{method:"PUT",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(r)},credentials:"include",body:JSON.stringify(n)});case 3:return c=e.sent,e.next=6,c.json();case 6:return a=e.sent,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(O,"/comment/").concat(t,"/delete"),{method:"DELETE",headers:{authorization:"Bearer ".concat(n)},credentials:"include"});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),L=n(12),A=function(e){var t=Object(j.g)(),n=Object(L.e)({loading:!e.server,indicator:Object(r.jsx)(L.c,{width:"28"}),loaderProps:{style:{color:"#00ffff"}}}),c=n.containerProps,a=n.indicatorEl,s=function(){var n=Object(u.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N();case 3:"Logged out successfully"===(r=n.sent).message?(localStorage.clear(),e.clearUser(),e.setAuth(!1),document.cookie="login=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",t.push("/login")):console.error(r),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"Navbar",children:Object(r.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark mb-2",children:[Object(r.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(r.jsx)(b.c,{className:"navbar-brand mr-2",to:"/",replace:!0,children:"Clumsyknight's Blog"}),!e.server&&Object(r.jsx)("div",Object(f.a)(Object(f.a)({style:{color:"#00ff80",cursor:"pointer"},title:"Connecting"},c),{},{children:a})),e.server&&Object(r.jsx)("div",{title:"Connected",children:Object(r.jsx)("svg",{height:"20",width:"20",cursor:"pointer",children:Object(r.jsx)("circle",{cx:"15",cy:"10",r:"5",fill:"#00ffbf"})})})]}),Object(r.jsx)("button",{className:"navbar-toggler ml-auto custom-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(r.jsx)("span",{className:"navbar-toggler-icon"})}),Object(r.jsxs)("div",{className:"container",children:[!e.authenticated&&Object(r.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(r.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(b.c,{activeClassName:"active",className:"nav-link",to:"/login",children:"Login"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(b.c,{activeClassName:"active",className:"nav-link",to:"/signup",children:"Signup"})})]})}),e.authenticated&&Object(r.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Object(r.jsxs)("ul",{className:"navbar-nav",children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(b.c,{activeClassName:"active",className:"nav-link",title:"".concat(e.user.firstname," ").concat(e.user.lastname),to:"/profile",children:"My Profile"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(b.c,{activeClassName:"active",className:"nav-link",title:"Make a new Post",to:"/blog/new",children:"New Post"})})]}),Object(r.jsx)("ul",{className:"navbar-nav ml-auto",children:Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)("div",{className:"nav-link",onClick:s,style:{cursor:"pointer"},children:"Logout"})})})]})]})]})})},D=function(){return Object(r.jsx)("div",{className:"Home",children:Object(r.jsxs)("div",{className:"shadow p-4 w-75 mx-auto",style:{fontSize:18},children:[Object(r.jsx)("h3",{className:"text-center",children:"Landing Page"}),Object(r.jsxs)("div",{className:"mt-3",children:["If you see a loading animation instead of a green dot next to",Object(r.jsx)("code",{children:" Clumsyknight's Blog"}),", that means your network isn't connected to the server yet. This happens because Heroku puts the API on sleep if there's no activity in 1 hour."]}),Object(r.jsxs)("div",{className:"mt-2",children:["This site is meant for making new Blog Posts and editing your posts and comments. If you want to read blog posts by other people you'll have to go to",Object(r.jsx)("code",{children:Object(r.jsx)("a",{href:"https://clumsynite.github.io/blog-read",className:"link mx-1",title:"Site meant for reading Blog Posts",children:"Blog Read"})}),"."]}),Object(r.jsxs)("div",{className:"mt-2",children:[Object(r.jsx)(b.b,{className:"link mr-2",to:"/login",children:"Login"}),"if you haven't logged in yet. You need to have an account if you want to make new posts."]}),Object(r.jsxs)("div",{className:"mt-2",children:[Object(r.jsx)(b.b,{className:"link mr-2",to:"/signup",children:"Signup"}),"if you are new here. Be sure to remember you password, you can't reset it and there's nothing we can do if you forget it."]})]})})},I=function(e){return Object(r.jsx)("div",{className:"Errors mx-auto",children:Object(r.jsx)("div",{className:"alert alert-danger",children:e.error})})},Y=function(e){var t=Object(j.g)(),n=Object(c.useState)(!1),a=Object(d.a)(n,2),s=a[0],o=a[1],i=Object(c.useState)(""),b=Object(d.a)(i,2),m=b[0],h=b[1],p=Object(c.useState)(""),x=Object(d.a)(p,2),f=x[0],O=x[1],v=Object(c.useState)(""),g=Object(d.a)(v,2),N=g[0],y=g[1];Object(c.useEffect)((function(){return setTimeout((function(){y("")}),5e3)}),[N,y]);var k=function(){var n=Object(u.a)(l.a.mark((function n(r){var c,a,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),""!==m.trim()){n.next=5;break}y("Username can't be Empty"),n.next=31;break;case 5:if(""!==f.trim()){n.next=9;break}y("Password can't be Empty"),n.next=31;break;case 9:return o(!0),n.prev=10,n.next=13,w({username:m,password:f});case 13:if(c=n.sent,o(!1),c.user){n.next=17;break}return n.abrupt("return",y("Username or Password is wrong"));case 17:a=c.token,s=c.user,localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(s)),e.setAuth(!0),e.setUser(s),document.cookie="login=true",t.push("/profile"),n.next=31;break;case 27:n.prev=27,n.t0=n.catch(10),o(!1),y(n.t0);case 31:case"end":return n.stop()}}),n,null,[[10,27]])})));return function(e){return n.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"Login",children:Object(r.jsxs)("div",{className:"card shadow mx-auto text-center",style:{width:"18rem",backgroundColor:"transparent"},children:[Object(r.jsx)("h3",{className:"card-header",children:"Please Login"}),Object(r.jsx)("div",{className:"card-body  mx-auto",children:Object(r.jsxs)("form",{method:"",action:"",children:[Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)("input",{type:"text",placeholder:"Enter Username",name:"username",required:!0,minLength:"6",autoFocus:!0,className:"form-control form-control-lg text-center",onChange:function(e){return h(e.target.value)}})}),Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",required:!0,minLength:"8",className:"form-control form-control-lg text-center",onChange:function(e){return O(e.target.value)}})}),Object(r.jsxs)("button",{className:"btn btn-block btn-lg ".concat(s?"btn-primary":"btn-outline-primary"),type:"submit",onClick:k,disabled:s,children:[!s&&"Login",s&&Object(r.jsx)(L.d,{width:"24"})]})]})}),N.length>0&&Object(r.jsx)(I,{error:N})]})})},_=n(28),z=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),o=Object(d.a)(s,2),i=o[0],j=o[1],m=Object(c.useState)(""),h=Object(d.a)(m,2),p=h[0],x=h[1],f=Object(c.useState)(""),O=Object(d.a)(f,2),v=O[0],w=O[1],N=Object(c.useState)(""),y=Object(d.a)(N,2),k=y[0],S=y[1],C=Object(c.useState)(""),P=Object(d.a)(C,2),E=P[0],T=P[1],B=Object(c.useState)(""),A=Object(d.a)(B,2),D=A[0],Y=A[1];Object(c.useEffect)((function(){return setTimeout((function(){Y("")}),5e3)}),[D,Y]);var z=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==i.trim()){e.next=5;break}Y("Firstname can't be Empty"),e.next=30;break;case 5:if(""!==p.trim()){e.next=9;break}Y("Lastname can't be Empty"),e.next=30;break;case 9:if(""!==v.trim()){e.next=13;break}Y("Username can't be Empty"),e.next=30;break;case 13:if(""!==k.trim()){e.next=17;break}Y("Password can't be Empty"),e.next=30;break;case 17:return a(!0),e.prev=18,e.next=21,g({firstname:i,lastname:p,username:v,password:k});case 21:n=e.sent,a(!1),n.user&&(T('\n          <div>Successfully created new account.</div>\n          <div className="text-left>\n          <div><strong>Firstname</strong>: '.concat(n.user.firstname,"</div>\n          <div><strong>Lastname:</strong> ").concat(n.user.lastname,"</div>\n          <div><strong>Username:</strong> ").concat(n.user.username,"</div>\n          <div><strong>Password:</strong> ").concat(k,"</div>\n          </div>\n          ")),j(""),x(""),w(""),S("")),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(18),a(!1),console.error(e.t0);case 30:case"end":return e.stop()}}),e,null,[[18,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"Signup",children:[Object(r.jsxs)("div",{className:"card shadow mx-auto text-center w-75",style:{backgroundColor:"transparent"},children:[Object(r.jsx)("h3",{className:"card-header",children:"Create new account"}),Object(r.jsx)("div",{className:"card-body mx-auto",children:Object(r.jsxs)("form",{method:"",action:"",children:[Object(r.jsxs)("div",{className:"form-row",children:[Object(r.jsx)("div",{className:"form-group col-md-6",children:Object(r.jsx)("input",{type:"text",placeholder:"Enter Firstname",name:"firstname",required:!0,minLength:"6",autoFocus:!0,className:"form-control form-control-lg text-center",onChange:function(e){return j(e.target.value)},value:i||""})}),Object(r.jsx)("div",{className:"form-group col-md-6",children:Object(r.jsx)("input",{type:"text",placeholder:"Enter Lastname",name:"lastname",required:!0,minLength:"6",className:"form-control form-control-lg text-center",onChange:function(e){return x(e.target.value)},value:p||""})})]}),Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)("input",{type:"text",placeholder:"Enter Username",name:"username",required:!0,minLength:"6",className:"form-control form-control-lg text-center",onChange:function(e){return w(e.target.value)},value:v||""})}),Object(r.jsx)("div",{className:"form-group",children:Object(r.jsx)("input",{type:"password",placeholder:"Enter Password",name:"password",required:!0,minLength:"8",className:"form-control form-control-lg text-center",onChange:function(e){return S(e.target.value)},value:k||""})}),Object(r.jsxs)("button",{className:"btn btn-block btn-lg ".concat(n?"btn-primary":"btn-outline-primary"),type:"submit",onClick:z,disabled:n,children:[!n&&"Signup",n&&Object(r.jsx)(L.d,{width:"24"})]})]})}),D.length>0&&Object(r.jsx)(I,{error:D})]}),E.length>0&&Object(r.jsx)("div",{className:"w-50 mx-auto shadow text-center",children:Object(r.jsxs)("div",{className:"alert bg-dark text-light mt-3",children:[Object(r.jsx)(_.a,{content:E}),Object(r.jsxs)("div",{children:["Move to",Object(r.jsx)("code",{children:Object(r.jsx)(b.b,{className:"link mx-1",to:"/login",children:"Login"})}),"Page"]})]})})]})},J=n(18),U=n.n(J),F=n(31),q=n.n(F),M=n(72),K=n.n(M),R=function(e){return K()(e).startOf("hour").fromNow()},G=function(e){var t=e.split(" ");if(t.length<30)return e;for(var n="",r=0;r<t.length&&!(r>=30);r++)n+=" ".concat(t[r]);return"".concat(n," ...")},H=function(e){return"".concat(e.firstname," ").concat(e.lastname)},V=(n(68),function(e){var t=localStorage.getItem("token"),n=e.blog,c=n.author,a=n.title,s=n.content,o=n.added,i=n._id,d=n.draft,j=q()(U.a),m=function(){var n=Object(u.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P(i,t);case 3:n.sent.message?(e.refresh("blogs"),U.a.fire("Deleted!","Your post has been deleted.","success")):U.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"}),n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),U.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"}),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"shadow mb-4 rounded",children:[Object(r.jsxs)("div",{className:"card text-white bg-light",children:[Object(r.jsxs)(b.b,{to:"/blog/".concat(i,"/view"),className:"link mx-0",children:[Object(r.jsx)("div",{className:"card-header text-center bg-dark",children:a}),Object(r.jsx)("div",{className:"card-body bg-light text-dark",children:Object(r.jsx)("div",{className:"card-text ",children:Object(r.jsx)(_.a,{content:G(s)})})})]}),Object(r.jsxs)("div",{className:"card-footer text-white ".concat(d?"bg-danger":"bg-primary"," text-right d-flex justify-content-between flex-wrap"),title:d?"This post hasn't been published yet":"This post is already Published",children:[Object(r.jsxs)("div",{className:"d-flex align-items-center",children:[Object(r.jsx)("i",{className:"material-icons mr-1",children:"account_circle"}),H(c),Object(r.jsx)("strong",{children:Object(r.jsx)("span",{className:"badge badge-pill badge-dark mx-1",children:" AKA "})}),c.username]}),Object(r.jsxs)("div",{className:"d-flex align-items-center",children:[Object(r.jsx)("i",{className:"material-icons mr-1",children:"access_time"}),R(o)]})]})]}),Object(r.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(r.jsx)("button",{className:"btn",title:"Delete Post",onClick:function(){j.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&m()}))},children:Object(r.jsx)("i",{className:"material-icons",children:"delete"})}),Object(r.jsx)(b.b,{to:"/blog/".concat(i,"/edit"),className:"btn",title:"Edit Post",children:Object(r.jsx)("i",{className:"material-icons",children:"edit"})})]})]})}),Q=function(e){var t=e.comment,n=t.author,c=t.title,a=t.content,s=t.added;return Object(r.jsxs)("div",{className:"card mb-4",children:[Object(r.jsxs)("div",{className:"card-body bg-light text-dark",children:[Object(r.jsx)("h4",{className:"card-title",children:c}),Object(r.jsx)("div",{className:"card-text ",children:Object(r.jsx)(_.a,{content:a})})]}),Object(r.jsxs)("div",{className:"card-footer text-white bg-secondary text-right d-flex justify-content-between flex-wrap",children:[Object(r.jsxs)("div",{className:"d-flex align-items-center",children:[Object(r.jsx)("i",{className:"material-icons mr-1",children:"account_circle"}),H(n),Object(r.jsx)("strong",{children:Object(r.jsx)("span",{className:"badge badge-pill badge-dark mx-1",children:" AKA "})}),n.username]}),Object(r.jsxs)("div",{className:"d-flex align-items-center",children:[Object(r.jsx)("i",{className:"material-icons mr-1",children:"access_time"}),R(s)]})]})]})},W=function(){var e=localStorage.getItem("token"),t=Object(c.useState)(!0),n=Object(d.a)(t,2),a=n[0],s=n[1],o=Object(L.e)({loading:a,indicator:Object(r.jsx)(L.a,{width:"100"}),loaderProps:{style:{color:"#17A2B8"}}}),i=o.containerProps,j=o.indicatorEl,m=Object(c.useState)([]),h=Object(d.a)(m,2),p=h[0],x=h[1],O=Object(c.useState)(),v=Object(d.a)(O,2),g=v[0],w=v[1],N=Object(c.useState)({}),k=Object(d.a)(N,2),S=k[0],C=k[1],P=Object(c.useCallback)(function(){var t=Object(u.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y(e);case 3:r=t.sent,x({user:r.user,blogs:r.blogs.reverse(),comments:r.comments.reverse()}),C(r.user),w(n||"blogs"),s(!1),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0),s(!1);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),[e]);Object(c.useEffect)((function(){P("blogs")}),[P]);var E=q()(U.a),T=function(){var t=Object(u.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B(n,e);case 3:t.sent.message?(P("comments"),U.a.fire("Deleted!","Your comment has been deleted.","success")):U.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),U.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"}),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"Profile",children:[a&&Object(r.jsx)("div",Object(f.a)(Object(f.a)({className:"text-center"},i),{},{children:j})),p.user&&Object(r.jsxs)("div",{className:"card mb-4 mx-auto shadow rounded",style:{width:"19rem"},children:[Object(r.jsxs)("div",{className:"card-header bg-dark text-white",children:["Joined ",R(S.added)]}),Object(r.jsxs)("div",{className:"card-body bg-light",children:[H(S)," ",Object(r.jsx)("strong",{children:Object(r.jsx)("span",{className:"badge badge-pill badge-dark mx-1",children:" AKA "})}),S.username]}),Object(r.jsxs)("div",{className:"card-footer text-white bg-info text-right d-flex justify-content-between flex-wrap",children:[Object(r.jsxs)("div",{className:"d-flex align-items-center",title:"Number of Posts",style:{cursor:"pointer"},onClick:function(){w("blogs")},children:["Post Count: ",p.blogs.length]}),Object(r.jsxs)("div",{className:"d-flex align-items-center",title:"Number of Comments",style:{cursor:"pointer"},onClick:function(){w("comments")},children:[Object(r.jsx)("i",{className:"material-icons mr-1",children:"comment"}),p.comments.length]})]})]}),"blogs"===g&&0===p.blogs.length&&Object(r.jsx)("div",{className:"alert alert-info mx-auto w-75",children:"You haven't Posted anything yet"}),"blogs"===g&&p.blogs.length>0&&p.blogs.map((function(e,t){return Object(r.jsx)(V,{blog:e,refresh:P},t)})),"comments"===g&&0===p.comments.length&&Object(r.jsx)("div",{className:"alert alert-info mx-auto w-75",children:"You haven't made any comments yet"}),"comments"===g&&p.comments.length>0&&p.comments.map((function(e,t){var n=e.blog;return Object(r.jsxs)("div",{className:"shadow rounded",children:[Object(r.jsxs)(b.b,{to:"/blog/".concat(n._id,"/view"),className:"link",children:[Object(r.jsxs)("div",{className:"card-header text-center bg-dark text-light",children:["You commented on ",Object(r.jsx)("code",{children:n.title})]}),Object(r.jsx)(Q,{comment:e})]}),Object(r.jsxs)("div",{className:"d-flex align-items-center justify-content-between mt-n5",children:[Object(r.jsx)("button",{className:"btn",title:"Delete Comment",onClick:function(){var t;t=e._id,E.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&T(t)}))},children:Object(r.jsx)("i",{className:"material-icons",children:"delete"})}),Object(r.jsx)(b.b,{to:"/comment/".concat(e._id,"/edit"),className:"btn",title:"Edit Comment",children:Object(r.jsx)("i",{className:"material-icons",children:"edit"})})]})]},t)}))]})},X=function(e){var t=e.post;return Object(r.jsx)("div",{className:"card shadow rounded mb-5",children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h1",{className:"card-title text-center",children:t.title}),Object(r.jsxs)("div",{className:"card-subtitle my-3 text-muted d-flex justify-content-between flex-wrap",children:[Object(r.jsxs)("div",{className:"d-flex align-items-center",children:[Object(r.jsx)("i",{className:"material-icons mr-1",children:"account_circle"}),H(t.author),Object(r.jsx)("strong",{children:Object(r.jsx)("span",{className:"badge badge-pill badge-dark mx-1",children:"AKA"})}),t.author.username]}),Object(r.jsxs)("div",{className:"d-flex align-items-center",children:[Object(r.jsx)("i",{className:"material-icons mr-1",children:"access_time"}),R(t.added)]})]}),Object(r.jsx)("div",{className:"card-text",children:Object(r.jsx)(_.a,{content:t.content})})]})})},Z=function(){var e=Object(j.h)().id,t=Object(j.g)(),n=localStorage.getItem("token"),a=Object(c.useState)(!0),s=Object(d.a)(a,2),o=s[0],i=s[1],m=Object(L.e)({loading:o,indicator:Object(r.jsx)(L.b,{width:"100"}),loaderProps:{style:{color:"#007BFF"}}}),h=m.containerProps,p=m.indicatorEl,x=Object(c.useState)(""),O=Object(d.a)(x,2),v=O[0],g=O[1];Object(c.useEffect)((function(){return setTimeout((function(){g("")}),5e3)}),[v,g]);var w=Object(c.useState)({}),N=Object(d.a)(w,2),y=N[0],S=N[1],C=Object(c.useState)([]),E=Object(d.a)(C,2),T=E[0],A=E[1],D=Object(c.useCallback)(Object(u.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k(e,n);case 3:if(!(r=t.sent).error&&null!==r.blog){t.next=8;break}return i(!1),g("Blog Post not found. There's a Problem fetching Post: ".concat(e)),t.abrupt("return");case 8:S(r.blog),A(r.comment.reverse()),i(!1),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0),i(!1);case 17:case"end":return t.stop()}}),t,null,[[0,13]])}))),[e,n]);Object(c.useEffect)((function(){D()}),[D]);var Y=q()(U.a),_=function(){var r=Object(u.a)(l.a.mark((function r(){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,P(e,n);case 3:r.sent.message?(U.a.fire("Deleted!","Your post has been deleted.","success"),t.push("/profile")):U.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"}),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),U.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"}),console.error(r.t0);case 11:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t,n);case 3:e.sent.message?(D(),U.a.fire("Deleted!","Your comment has been deleted.","success")):U.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),U.a.fire({icon:"error",title:"Oops...",text:"Something went wrong!"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[o&&Object(r.jsx)("div",Object(f.a)(Object(f.a)({className:"text-center my-5"},h),{},{children:p})),y.title&&!o&&Object(r.jsxs)("div",{className:"mb-4",children:[Object(r.jsx)(X,{post:y}),Object(r.jsxs)("div",{className:"mt-n5 d-flex align-items-center justify-content-between rounded shadow",children:[Object(r.jsx)("button",{className:"btn",title:"Delete Post",onClick:function(){Y.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&_()}))},children:Object(r.jsx)("i",{className:"material-icons",children:"delete"})}),Object(r.jsx)(b.b,{to:"/blog/".concat(e,"/edit"),className:"btn",title:"Edit Post",children:Object(r.jsx)("i",{className:"material-icons",children:"edit"})})]})]}),v.length>0>0&&Object(r.jsx)("div",{className:"w-75 mx-auto",children:Object(r.jsx)(I,{error:v})}),T.length>0&&T.map((function(e,t){return Object(r.jsxs)("div",{className:"shadow mb-4",children:[Object(r.jsx)(Q,{comment:e}),e.author._id===y.author._id&&Object(r.jsxs)("div",{className:"d-flex align-items-center justify-content-between mt-n4",style:{backgroundColor:"transparent"},children:[Object(r.jsx)("button",{className:"btn",title:"Delete Comment",onClick:function(){var t;t=e._id,Y.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&z(t)}))},children:Object(r.jsx)("i",{className:"material-icons",children:"delete"})}),Object(r.jsx)(b.b,{to:"/comment/".concat(e._id,"/edit"),className:"btn",title:"Edit Comment",children:Object(r.jsx)("i",{className:"material-icons",children:"edit"})})]})]},t)}))]})},$=n(73),ee=function(e){return Object(r.jsx)($.a,{apiKey:"iegn84mumhivsy1it2lvc8qjfxkaav0snoxsx4u66dxlnz3g",initialValue:"",init:{height:e.height,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",placeholder:e.placeholder},onEditorChange:e.handleChange,value:e.value})},te=function(){var e=Object(j.g)(),t=JSON.parse(localStorage.getItem("user")),n=localStorage.getItem("token"),a=Object(c.useState)(""),s=Object(d.a)(a,2),o=s[0],i=s[1],b=Object(c.useState)(""),m=Object(d.a)(b,2),h=m[0],p=m[1],x=Object(c.useState)(!1),f=Object(d.a)(x,2),O=f[0],v=f[1],g=Object(c.useState)(""),w=Object(d.a)(g,2),N=w[0],y=w[1];Object(c.useEffect)((function(){return setTimeout((function(){y("")}),5e3)}),[N,y]);var k=Object(c.useState)(!1),C=Object(d.a)(k,2),P=C[0],E=C[1],T=function(){var t=Object(u.a)(l.a.mark((function t(){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S({title:o,content:h,draft:O},n);case 3:r=t.sent,E(!1),r.error||e.push("/profile"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),E(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"AddPost",children:[Object(r.jsx)("div",{className:"Preview",children:Object(r.jsx)(X,{post:{title:o,content:h,added:new Date,author:t}})}),N.length>0&&Object(r.jsx)(I,{error:N}),Object(r.jsx)("div",{className:"Edit",children:Object(r.jsxs)("div",{className:"mb-4 shadow",children:[Object(r.jsx)("input",{type:"text",placeholder:"Enter Post Title",maxLength:"40",onChange:function(e){i(e.target.value)},value:o,className:"form-control"}),Object(r.jsx)(ee,{height:250,placeholder:"Enter content for your post here",handleChange:function(e){p(e)},value:h}),Object(r.jsxs)("div",{className:"d-flex justify-content-between align-content-center",children:[Object(r.jsx)("div",{className:"form-check form-check-inline ml-2 bg-light",children:Object(r.jsxs)("label",{className:"form-check-label",children:["Save as Draft",Object(r.jsx)("input",{className:"form-check-input mx-2",type:"checkbox",onClick:function(e){v(e.target.checked)}})]})}),Object(r.jsxs)("button",{type:"submit",className:"btn ".concat(P?"btn-success":"btn-outline-success"," w-50"),onClick:function(e){e.preventDefault(),0===o.trim().length?y("Post Title can't be empty"):0===h.trim().length?y("Post content can't be empty"):(E(!0),T())},title:"Post",disabled:P,children:[!P&&"Submit",P&&Object(r.jsx)(L.d,{width:"20"})]})]})]})})]})},ne=function(){var e=Object(j.g)(),t=Object(j.h)().id,n=JSON.parse(localStorage.getItem("user")),a=localStorage.getItem("token"),s=Object(c.useState)(!0),o=Object(d.a)(s,2),i=o[0],b=o[1],m=Object(L.e)({loading:i,indicator:Object(r.jsx)(L.b,{width:"100"}),loaderProps:{style:{color:"#007BFF"}}}),h=m.containerProps,p=m.indicatorEl,x=Object(c.useState)(""),O=Object(d.a)(x,2),v=O[0],g=O[1],w=Object(c.useState)(""),N=Object(d.a)(w,2),y=N[0],S=N[1],P=Object(c.useState)(!1),E=Object(d.a)(P,2),T=E[0],B=E[1],A=Object(c.useState)(""),D=Object(d.a)(A,2),Y=D[0],_=D[1];Object(c.useEffect)((function(){return setTimeout((function(){_("")}),5e3)}),[Y,_]);var z=Object(c.useState)(!1),J=Object(d.a)(z,2),U=J[0],F=J[1];Object(c.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(t,a);case 3:if(!(n=e.sent).error){e.next=8;break}return b(!1),_("Blog Post not found. There's a Problem fetching Post: ".concat(t)),e.abrupt("return");case 8:g(n.blog.title),S(n.blog.content),B(n.blog.draft),b(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0),b(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()}),[t,a,g,S]);var q=function(){var n=Object(u.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,C(t,{title:v,content:y,draft:T},a);case 3:r=n.sent,F(!1),r.error||e.push("/profile"),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),F(!1);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"EditPost",children:[i&&Object(r.jsx)("div",Object(f.a)(Object(f.a)({className:"text-center my-5"},h),{},{children:p})),!i&&Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"Preview",children:Object(r.jsx)(X,{post:{title:v,content:y,added:new Date,author:n}})}),Y.length>0&&Object(r.jsx)(I,{error:Y}),Object(r.jsx)("div",{className:"Edit",children:Object(r.jsxs)("div",{className:"mb-4 shadow",children:[Object(r.jsx)("input",{type:"text",placeholder:"Enter Post Title",maxLength:"40",onChange:function(e){g(e.target.value)},value:v,className:"form-control"}),Object(r.jsx)(ee,{height:250,placeholder:"Enter content for your post here",handleChange:function(e){S(e)},value:y}),Object(r.jsxs)("div",{className:"d-flex justify-content-between align-content-center",children:[Object(r.jsx)("div",{className:"form-check form-check-inline ml-2 bg-light",children:Object(r.jsxs)("label",{className:"form-check-label",children:["Save as Draft",Object(r.jsx)("input",{className:"form-check-input mx-2",type:"checkbox",checked:T||!1,onChange:function(e){B(e.target.checked)}})]})}),Object(r.jsxs)("button",{type:"submit",className:"btn ".concat(U?"btn-success":"btn-outline-success"," w-50"),onClick:function(e){e.preventDefault(),0===v.trim().length?_("Post Title can't be empty"):0===y.trim().length?_("Post content can't be empty"):(F(!0),q())},title:"Post",disabled:U,children:[!U&&"Submit",U&&Object(r.jsx)(L.d,{width:"20"})]})]})]})})]})]})},re=function(){var e=Object(j.g)(),t=Object(j.h)().id,n=JSON.parse(localStorage.getItem("user")),a=localStorage.getItem("token"),s=Object(c.useState)(!0),o=Object(d.a)(s,2),i=o[0],b=o[1],m=Object(L.e)({loading:i,indicator:Object(r.jsx)(L.b,{width:"100"}),loaderProps:{style:{color:"#007BFF"}}}),h=m.containerProps,p=m.indicatorEl,x=Object(c.useState)(""),O=Object(d.a)(x,2),v=O[0],g=O[1],w=Object(c.useState)(""),N=Object(d.a)(w,2),y=N[0],k=N[1],S=Object(c.useState)(""),C=Object(d.a)(S,2),P=C[0],B=C[1];Object(c.useEffect)((function(){return setTimeout((function(){B("")}),5e3)}),[P,B]);var A=Object(c.useState)(!1),D=Object(d.a)(A,2),Y=D[0],_=D[1];Object(c.useEffect)((function(){(function(){var r=Object(u.a)(l.a.mark((function r(){var c;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,E(t,a);case 3:c=r.sent,b(!1),c.error?(B("Comment not found. There's a Problem fetching Comment: ".concat(t,". Redirecting...")),setTimeout((function(){e.push("/profile")}),5e3)):c.author!==n._id?(B("This is not your Comment. You can't edit someone else's comment. Redirecting..."),setTimeout((function(){e.push("/profile")}),5e3)):(k(c.content),g(c.title)),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.error(r.t0),b(!1);case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}})()()}),[]);var z=function(){var n=Object(u.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T(t,{title:v,content:y},a);case 3:r=n.sent,_(!1),r.error||e.push("/profile"),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),_(!1);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(r.jsxs)("div",{className:"EditComment",children:[i&&Object(r.jsx)("div",Object(f.a)(Object(f.a)({className:"text-center my-5"},h),{},{children:p})),P.length>0&&Object(r.jsx)(I,{error:P}),v.length>1&&!i&&Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"Preview",children:Object(r.jsx)(Q,{comment:{title:v,content:y,author:n,added:new Date}})}),Object(r.jsx)("div",{className:"Editor",children:Object(r.jsxs)("div",{className:"mb-4 shadow",children:[Object(r.jsx)("input",{type:"text",placeholder:"Enter Post Title",maxLength:"40",onChange:function(e){g(e.target.value)},value:v,className:"form-control"}),Object(r.jsx)(ee,{height:250,placeholder:"Enter content for your post here",handleChange:function(e){k(e)},value:y}),Object(r.jsxs)("button",{type:"submit",className:"btn ".concat(Y?"btn-info":"btn-outline-info"," btn-block"),onClick:function(e){e.preventDefault(),0===v.trim().length?B("Comment Title can't be empty"):0===y.trim().length?B("Comment content can't be empty"):(_(!0),z())},title:"Post",disabled:Y,children:[!Y&&"Submit",Y&&Object(r.jsx)(L.d,{width:"20"})]})]})})]})]})},ce=(n(245),function(){return Object(r.jsxs)("footer",{className:"Footer bg-dark text-light",children:["Made with",Object(r.jsx)("i",{className:"material-icons heart",children:"favorite"})," by",Object(r.jsx)("a",{href:"https://github.com/Clumsynite",title:"Github Profile",className:"link",target:"_blank",rel:"noreferrer",children:"Clumsyknight"})]})}),ae=n(36),se=function(e){var t=e.component,n=Object(ae.a)(e,["component"]);return Object(r.jsx)(j.b,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return localStorage.getItem("token")?Object(r.jsx)(t,Object(f.a)({},e)):Object(r.jsx)(j.a,{to:"/login"})}}))},oe=function(e){var t=e.component,n=e.appProps,c=Object(ae.a)(e,["component","appProps"]);return Object(r.jsx)(j.b,Object(f.a)(Object(f.a)({},c),{},{render:function(e){return localStorage.getItem("token")?Object(r.jsx)(j.a,{to:"/"}):Object(r.jsx)(t,Object(f.a)(Object(f.a)({},e),n))}}))},ie=function(){var e=Object(c.useState)(localStorage.getItem("user")||{}),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!!localStorage.getItem("token")),o=Object(d.a)(s,2),i=o[0],m=o[1],h=Object(c.useState)(!1),p=Object(d.a)(h,2),f=p[0],O=p[1];return Object(c.useEffect)((function(){var e=function(){var t=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(f){t.next=5;break}return t.next=3,v();case 3:t.sent.error?(console.error("Unknown error. Reconnecting in 10sec"),O(!1),setTimeout(e,1e4)):O(!0);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();setTimeout(function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==document.cookie){e.next=11;break}return e.prev=1,e.next=4,N();case 4:"Logged out successfully"===(t=e.sent).message?(localStorage.clear(),a({}),m(!1)):console.error(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),2e3),e()}),[]),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(x,{}),Object(r.jsxs)(b.a,{children:[Object(r.jsx)(A,{authenticated:i,setAuth:m,user:n,clearUser:function(){return a({})},server:f}),Object(r.jsx)("div",{className:"container mt-3",children:Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{exact:!0,path:"/",component:D}),Object(r.jsx)(oe,{exact:!0,path:"/login",component:Y,appProps:{setAuth:m,setUser:a}}),Object(r.jsx)(oe,{exact:!0,path:"/signup",component:z}),Object(r.jsx)(se,{exact:!0,path:"/profile",component:W}),Object(r.jsx)(se,{exact:!0,path:"/blog/:id/view",component:Z}),Object(r.jsx)(se,{exact:!0,path:"/blog/new",component:te}),Object(r.jsx)(se,{exact:!0,path:"/blog/:id/edit",component:ne}),Object(r.jsx)(se,{exact:!0,path:"/comment/:id/edit",component:re}),Object(r.jsx)(j.a,{to:"/"})]})})]}),Object(r.jsx)("div",{style:{marginTop:80},children:Object(r.jsx)(ce,{})})]})};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(ie,{})}),document.getElementById("root"))},68:function(e,t,n){}},[[246,1,2]]]);
//# sourceMappingURL=main.f272febf.chunk.js.map